<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sicnu.dao.ProjectDao">

    <insert id="addProject" parameterType="project">
        insert into project(
        project_stage,
        project_type,
        leader_id,
        project_name,
        project_abstract,
        declaration,
        apply_time
        ) values(
        #{project_stage},
        #{project_type},
        #{leader_id},
        #{project_name},
        #{project_abstract},
        #{declaration},
        #{apply_time}
        )
    </insert>

    <select id="findAllProject" parameterType="string" resultType="Project">
		select * from project
	</select>

    <update id="updateProject" parameterType="Project">
        update project set
        leader_id = #{leader_id},
        project_name = #{project_name},
        project_abstract= #{project_abstract},
        project_declaration= #{project_declaration}
        where
        project_id = #{project_id}
    </update>
    <update id="updateProjectStage" parameterType="Project">
        update project set
        project_stage = #{project_stage}
        where
        project_id = #{project_id}
        And 
        project_name = #{project_name}
    </update>
    <update id="updateProjectType" parameterType="Project">
        update project set
        project_type = #{project_type}
        where
        project_id = #{project_id}
        And 
        project_name = #{project_name}
    </update>
    <select id="selectProjectTeamByName"  resultType="Project">
        SELECT
        p.project_id,p.project_stage,p.project_type,p.project_name,p.apply_time,
        u.user_name,u.user_number,
        t.join_time
        FROM
        project p,project_team t,user u
        WHERE
        p.project_id = t.project_id
        AND
        t.user_id=u.user_id
        AND
        p.project_name=#{project_name}
    </select>

    <delete id="delProject" parameterType="Project">
        delete from project
        where
        project_id = #{project_id}
        And
        leader_id = #{leader_id}
        AND
        projcet_name =#{project_name}
    </delete>

</mapper>